/* Love Journal UI — light/dark themes + “Love Club” window + paper calendar
   Performance notes: no heavy filters/animations; only small shadows. */

:root{
  --radius: 26px;
  --radius2: 16px;
  --tap: 44px;
  --shadow: 0 18px 55px rgba(0,0,0,.12);
  --shadow2: 0 10px 25px rgba(0,0,0,.10);
  --paperShadow: 0 18px 55px rgba(0,0,0,.12);
}

/* Theme tokens (light) */
html[data-theme="light"]{
  color-scheme: light;

  --bg0:#f7a7aa;
  --bg1:#f19a9e;
  --frameBorder:rgba(255,255,255,.24);

  --window:#f7c6c8;
  --windowTop:rgba(0,0,0,.10);
  --windowBody:rgba(0,0,0,.08);

  --ink:#241b1c;
  --muted:rgba(36,27,28,.62);

  --glass:rgba(255,255,255,.16);
  --glassBorder:rgba(255,255,255,.20);
  --fieldBg:rgba(255,255,255,.16);
  --fieldBorder:rgba(255,255,255,.22);

  --accent:#c5364a;
  --accentSoft:rgba(197,54,74,.22);

  --paper:#ffffff;
  --paperInk:rgba(36,27,28,.85);
  --paperMuted:rgba(36,27,28,.62);
  --paperLine:rgba(36,27,28,.20);
  --paperHole:rgba(0,0,0,.10);
}

/* Theme tokens (dark) */
html[data-theme="dark"]{
  color-scheme: dark;

  --bg0:#120a0b;
  --bg1:#1e0f12;
  --frameBorder:rgba(255,255,255,.14);

  --window:#2a1618;
  --windowTop:rgba(255,255,255,.08);
  --windowBody:rgba(255,255,255,.06);

  --ink:#f7f3f4;
  --muted:rgba(247,243,244,.70);

  --glass:rgba(255,255,255,.08);
  --glassBorder:rgba(255,255,255,.14);
  --fieldBg:rgba(255,255,255,.08);
  --fieldBorder:rgba(255,255,255,.14);

  --accent:#ff4d63;
  --accentSoft:rgba(255,77,99,.18);

  --paper:#161112;
  --paperInk:rgba(247,243,244,.92);
  --paperMuted:rgba(247,243,244,.70);
  --paperLine:rgba(247,243,244,.18);
  --paperHole:rgba(255,255,255,.12);

  --paperShadow: 0 18px 55px rgba(0,0,0,.35);
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
  color: var(--ink);
  background:
    radial-gradient(900px 700px at 15% 0%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(900px 700px at 85% 10%, rgba(255,255,255,.28), transparent 60%),
    radial-gradient(900px 700px at 50% 110%, rgba(197,54,74,.12), transparent 55%),
    linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 60%, #0000 120%);
}

.hidden{ display:none !important; }

.page{ min-height:100%; padding: 22px 14px 70px; }
.frame{
  max-width: 1020px;
  margin: 0 auto;
  border-radius: 40px;
  padding: 18px;
  border: 1px solid var(--frameBorder);
  background: rgba(255,255,255,.10);
  box-shadow: var(--shadow);
}

.siteHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 6px 8px 16px;
}

.brand{ display:flex; align-items:center; gap:12px; min-width:0; }
.brandBadge{
  width:42px; height:42px;
  border-radius: 999px;
  display:grid; place-items:center;
  background: rgba(0,0,0,.10);
  border: 1px solid var(--frameBorder);
  color:#fff;
}
html[data-theme="dark"] .brandBadge{ background: rgba(255,255,255,.10); }

.brandTitle{ font-weight: 900; letter-spacing: .2px; color:#fff; }
.brandSub{
  font-size: 13px;
  color: rgba(255,255,255,.80);
  white-space: nowrap;
  overflow:hidden;
  text-overflow: ellipsis;
  max-width: 60vw;
}

.topActions{ display:flex; gap:10px; align-items:center; }

.window{
  border-radius: 34px;
  overflow: hidden;
  background: var(--window);
  border: 1px solid rgba(0,0,0,.10);
  box-shadow: var(--shadow2);
}
html[data-theme="dark"] .window{ border-color: rgba(255,255,255,.10); }

.windowTop{
  height: 52px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 14px;
  background: var(--windowTop);
  border-bottom: 1px solid rgba(255,255,255,.14);
}

.dots{ display:flex; gap:6px; }
.dots span{
  width:10px; height:10px; border-radius:999px;
  background: rgba(255,255,255,.55);
}

.windowTitle{
  font-weight: 900;
  letter-spacing: 1px;
  text-transform: lowercase;
  color: rgba(255,255,255,.92);
}
.tinyHearts{ color: rgba(255,255,255,.85); letter-spacing: 2px; font-weight: 800; }

.windowBody{
  padding: 18px;
  background:
    radial-gradient(900px 700px at 30% 0%, rgba(255,255,255,.16), transparent 55%),
    radial-gradient(900px 700px at 80% 30%, rgba(255,255,255,.12), transparent 60%),
    var(--windowBody);
}

.card{
  background: var(--glass);
  border: 1px solid var(--glassBorder);
  border-radius: var(--radius);
  padding: 16px;
}

.authCard{ max-width: 520px; }

h1{ margin: 0 0 6px; font-size: 24px; color:#fff; }
h2{ margin: 0; font-size: 20px; color:#fff; }
.h3, h3{
  margin: 10px 0 8px;
  font-size: 13px;
  letter-spacing: .2px;
  text-transform: uppercase;
  color: rgba(255,255,255,.74);
}
.muted{ color: rgba(255,255,255,.74); }
.small{ font-size: 12px; }

.hint{ color: rgba(255,255,255,.70); font-size: 12px; line-height: 1.35; margin-top: 6px; }
.error{
  color: #fff;
  background: var(--accentSoft);
  border: 1px solid rgba(255,255,255,.12);
  padding: 10px 12px;
  border-radius: var(--radius2);
}

.stack{ display:flex; flex-direction:column; gap:12px; }
.row{ display:flex; gap:12px; align-items:end; flex-wrap:wrap; }
.row.right{ justify-content:flex-end; }
.row.spread{ justify-content:space-between; align-items:center; }

.field{ display:flex; flex-direction:column; gap:6px; flex:1; min-width: 220px; }
.field > span{ font-size: 12px; color: rgba(255,255,255,.78); }

input, textarea, select{
  width:100%;
  padding: 12px 12px;
  border-radius: var(--radius2);
  border: 1px solid var(--fieldBorder);
  background: var(--fieldBg);
  color: #fff;
  outline: none;
}
textarea{ resize: vertical; }

.search{
  min-height: 44px;
  border-radius: 999px;
  padding: 10px 14px;
}

.btn{
  min-height: var(--tap);
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid var(--fieldBorder);
  background: rgba(0,0,0,.10);
  color: #fff;
  cursor:pointer;
  user-select:none;
  touch-action: manipulation;
}
html[data-theme="dark"] .btn{ background: rgba(255,255,255,.06); }

.btn:active{ transform: translateY(1px); }
.btn.primary{
  border-color: rgba(255,255,255,.18);
  background: rgba(197,54,74,.25);
}
html[data-theme="dark"] .btn.primary{ background: rgba(255,77,99,.22); }

.btn.ghost{ background: rgba(0,0,0,.12); }
html[data-theme="dark"] .btn.ghost{ background: rgba(255,255,255,.08); }

.iconBtn{
  width: 44px;
  padding: 0;
  display:grid;
  place-items:center;
}

/* Hero */
.heroRow{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 14px;
  margin-bottom: 14px;
}
@media (max-width: 860px){
  .heroRow{ grid-template-columns: 1fr; }
}
.heroCard{
  border-radius: var(--radius);
  border: 1px solid var(--glassBorder);
  background: rgba(0,0,0,.12);
  padding: 16px;
}
html[data-theme="dark"] .heroCard{ background: rgba(255,255,255,.06); }

.heroTitle{ font-weight: 900; color:#fff; letter-spacing:.2px; }
.heroText{ margin-top: 6px; color: rgba(255,255,255,.76); line-height: 1.35; }
.stats{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 12px; }
.stat{
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 999px;
  padding: 8px 12px;
  background: rgba(255,255,255,.10);
  color:#fff;
  font-size: 12px;
}
.quickActions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; }

/* Tabs */
.tabs{ display:flex; gap:10px; margin: 0 0 14px; flex-wrap:wrap; }
.tab{
  min-height: 40px;
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid var(--fieldBorder);
  background: rgba(0,0,0,.12);
  color: #fff;
  cursor:pointer;
}
.tab.active{ background: rgba(255,255,255,.18); border-color: rgba(255,255,255,.26); }

/* Calendar layout */
.calendarWrap{
  display:grid;
  grid-template-columns: 1.15fr .85fr;
  gap: 14px;
  align-items:start;
  margin-top: 12px;
}
@media (max-width: 860px){ .calendarWrap{ grid-template-columns: 1fr; } }

.monthLabel{
  font-family: ui-serif, Georgia, "Times New Roman", serif;
  font-weight: 900;
  letter-spacing: 2px;
  font-size: 38px;
  line-height: 1;
  text-transform: uppercase;
  color:#fff;
}
.monthMeta{
  margin-top: 6px;
  font-size: 13px;
  color: rgba(255,255,255,.74);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

/* Paper calendar */
.paperCalendar{
  position: relative;
  background: var(--paper);
  border-radius: 22px;
  border: 1px solid rgba(0,0,0,.10);
  box-shadow: var(--paperShadow);
  overflow: hidden;
}
html[data-theme="dark"] .paperCalendar{ border-color: rgba(255,255,255,.10); }

/* perforated edges */
.paperCalendar::before,
.paperCalendar::after{
  content:"";
  position:absolute;
  left: 14px;
  right: 14px;
  height: 14px;
  pointer-events:none;
  background-repeat: repeat-x;
  background-size: 14px 14px;
  background-image: radial-gradient(circle at 7px 7px, var(--paperHole) 0 6px, transparent 6.2px);
  opacity:.22;
}
.paperCalendar::before{ top: -7px; }
.paperCalendar::after{ bottom: -7px; }

.calHeader{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  padding: 12px 12px 10px;
  border-bottom: 1px dotted var(--paperLine);
}
.calHeader div{
  text-align:center;
  font-size: 12px;
  letter-spacing: 1px;
  color: var(--paperMuted);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

.calGrid{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  grid-auto-rows: 46px;
  padding: 10px 12px 14px;
  gap: 8px;
}
@media (max-width: 420px){ .calGrid{ grid-auto-rows: 44px; } }

.day{
  position: relative;
  border-radius: 14px;
  border: none;
  background: transparent;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  user-select:none;
  touch-action: manipulation;
}
.day .n{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 13px;
  color: var(--paperInk);
}
.day.out .n{ color: rgba(36,27,28,.28); }
html[data-theme="dark"] .day.out .n{ color: rgba(247,243,244,.32); }

.day.selected{ background: rgba(197,54,74,.10); }
html[data-theme="dark"] .day.selected{ background: rgba(255,77,99,.14); }

.day.today .n{
  text-decoration: underline;
  text-underline-offset: 3px;
  text-decoration-thickness: 2px;
  text-decoration-color: rgba(197,54,74,.55);
}
html[data-theme="dark"] .day.today .n{ text-decoration-color: rgba(255,77,99,.55); }

.day .mark{
  position:absolute;
  bottom: 6px;
  left: 8px;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  display:grid;
  place-items:center;
  background: var(--accent);
  color: #fff;
  font-size: 13px;
  box-shadow: 0 10px 18px rgba(0,0,0,.12);
}

/* Side panel */
.side{
  background: var(--glass);
  border: 1px solid var(--glassBorder);
  border-radius: var(--radius);
  padding: 12px;
}
.sideTitle{ font-weight: 900; color:#fff; margin-bottom: 10px; }
.sep{ border:none; border-top: 1px dashed rgba(255,255,255,.22); margin: 12px 0; }

.eventList{ display:flex; flex-direction:column; gap:8px; }
.eventItem{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  border: 1px solid var(--glassBorder);
  border-radius: var(--radius2);
  padding: 10px 10px;
  background: rgba(0,0,0,.10);
}
html[data-theme="dark"] .eventItem{ background: rgba(255,255,255,.06); }

.eventTitle{ font-weight: 900; font-size: 14px; color:#fff; }
.eventNote{ color: rgba(255,255,255,.72); font-size: 12px; margin-top: 3px; }
.eventTag{
  font-size: 11px;
  color: rgba(255,255,255,.75);
  border: 1px solid var(--glassBorder);
  border-radius: 999px;
  padding: 4px 8px;
  white-space: nowrap;
}
.eventDel{ margin-left: 8px; min-height: 34px; padding: 6px 10px; }

/* Feed */
.feed{ display:flex; flex-direction:column; gap:10px; margin-top: 14px; }
.feedItem{
  border: 1px solid var(--glassBorder);
  border-radius: var(--radius);
  background: rgba(0,0,0,.10);
  padding: 12px;
}
html[data-theme="dark"] .feedItem{ background: rgba(255,255,255,.06); }
.feedTop{ display:flex; justify-content:space-between; gap:10px; }
.feedTitle{ font-weight: 900; color:#fff; }
.feedMeta{ color: rgba(255,255,255,.72); font-size: 12px; }
.feedBody{ margin-top: 8px; color:#fff; white-space: pre-wrap; line-height:1.45; }
.feedThumb{
  margin-top: 10px;
  border-radius: 14px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.12);
}
.feedThumb img{ width:100%; height:auto; display:block; }

/* Diary list */
.list{ display:flex; flex-direction:column; gap:10px; margin-top: 14px; }
.entry{
  border: 1px solid var(--glassBorder);
  border-radius: var(--radius);
  padding: 12px;
  background: rgba(0,0,0,.10);
}
html[data-theme="dark"] .entry{ background: rgba(255,255,255,.06); }
.entryDate{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 12px;
  color: rgba(255,255,255,.72);
}
.entryBody{ margin-top: 8px; white-space: pre-wrap; line-height: 1.45; color:#fff; }
.entryTags{ margin-top: 8px; display:flex; flex-wrap:wrap; gap:6px; }
.pill{
  font-size: 11px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  color: rgba(255,255,255,.78);
  background: rgba(255,255,255,.10);
}
.pager{ display:flex; align-items:center; gap:10px; }

/* Album */
.masonry{
  margin-top: 14px;
  columns: 3 220px;
  column-gap: 10px;
}
@media (max-width: 700px){ .masonry{ columns: 2 160px; } }
@media (max-width: 420px){ .masonry{ columns: 1 140px; } }

.photoCard{
  break-inside: avoid;
  border: 1px solid rgba(255,255,255,.18);
  border-radius: var(--radius);
  overflow:hidden;
  background: rgba(0,0,0,.10);
  margin: 0 0 10px;
  position: relative;
}
html[data-theme="dark"] .photoCard{ background: rgba(255,255,255,.06); }
.photoCard img{ width:100%; height:auto; display:block; }
.photoCap{ padding: 10px 10px 12px; }
.photoCap .d{ font-size: 12px; color: rgba(255,255,255,.72); }
.photoCap .c{ margin-top: 4px; font-size: 13px; color:#fff; }

/* Photo delete button */
.photoDel{
  position:absolute;
  top: 8px;
  right: 8px;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.22);
  background: rgba(0,0,0,.24);
  color:#fff;
  display:grid;
  place-items:center;
  cursor:pointer;
}
html[data-theme="dark"] .photoDel{ background: rgba(0,0,0,.30); }
.photoDel:active{ transform: translateY(1px); }
.sentinel{ height: 1px; }

/* Live */
.liveToolbar{
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  margin-top: 12px;
  align-items:center;
}
.toolGroup{ display:flex; gap:10px; align-items:center; }
.toolGroup.grow{ flex: 1 1 260px; }
.toolBtn.active{ outline: 2px solid rgba(255,255,255,.22); }

.colors .c{
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.20);
  background: rgba(255,255,255,.12);
  cursor:pointer;
}
.colors .c[data-color="#c5364a"]{ background:#c5364a; }
.colors .c[data-color="#111111"]{ background:#111111; }
.colors .c[data-color="#ffffff"]{ background:#ffffff; }
.colors .c[data-color="#f59e0b"]{ background:#f59e0b; }
.colors .c[data-color="#10b981"]{ background:#10b981; }
.colors .c[data-color="#3b82f6"]{ background:#3b82f6; }

.range{ display:flex; flex-direction:column; gap:6px; min-width: 160px; }
.range input{ padding:0; height: 32px; background: transparent; border: none; }

.liveStage{
  position: relative;
  margin-top: 12px;
  border-radius: var(--radius);
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.10);
  height: min(64vh, 620px);
  /* prevents scroll/zoom while drawing on touch devices */
  touch-action: none;
  overscroll-behavior: contain;
}

/* Stable viewport height on mobile Safari (prevents jumping when address bar shows/hides) */
@supports (height: 1svh){
  .liveStage{ height: min(64svh, 620px); }
}
html[data-theme="dark"] .liveStage{ background: rgba(255,255,255,.06); }
#liveCanvas{
  width: 100%;
  height: 100%;
  display:block;
  touch-action: none;
}
.liveHint{
  position:absolute;
  inset: 0;
  display:grid;
  place-items:center;
  color: rgba(255,255,255,.78);
  pointer-events:none;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .btn:active, .day:active{ transform:none; }
}


/* --- Modal (Surprise) --- */
.modal{ position: fixed; inset: 0; z-index: 60; }
.modalBackdrop{ position:absolute; inset:0; background: rgba(0,0,0,.35); }
.modalCard{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  width: min(520px, calc(100vw - 28px));
  border-radius: var(--radius);
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  overflow:hidden;
}
html[data-theme="dark"] .modalCard{ background: rgba(0,0,0,.35); border-color: rgba(255,255,255,.14); }

.modalTop{
  display:flex; align-items:center; justify-content:space-between;
  gap: 12px;
  padding: 12px 12px;
  border-bottom: 1px solid rgba(255,255,255,.14);
}
html[data-theme="light"] .modalTop{ border-bottom: 1px solid rgba(36,27,28,.10); }
.modalTitle{ font-weight: 900; letter-spacing:.2px; }
.modalBody{ padding: 14px; }
.surpriseMsg{
  font-size: 18px;
  line-height: 1.35;
  font-weight: 800;
  letter-spacing: .1px;
}

/* Confetti canvas (lightweight) */
.confetti{ position: fixed; inset:0; z-index: 65; pointer-events:none; }

/* --- Photo Viewer (Lightbox) --- */
.viewer{ position: fixed; inset:0; z-index: 70; }
.viewerBackdrop{ position:absolute; inset:0; background: rgba(0,0,0,.45); }
.viewerCard{
  position:absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  width: min(860px, calc(100vw - 28px));
  height: min(84vh, 720px);
  border-radius: var(--radius);
  background: rgba(0,0,0,.16);
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: var(--shadow);
  overflow:hidden;
  display:flex;
  flex-direction: column;
}
html[data-theme="light"] .viewerCard{
  background: rgba(255,255,255,.16);
  border-color: rgba(36,27,28,.12);
}

.viewerTop{
  display:flex; align-items:center; justify-content:space-between;
  gap: 12px;
  padding: 10px 10px;
  background: rgba(0,0,0,.12);
  border-bottom: 1px solid rgba(255,255,255,.14);
}
html[data-theme="light"] .viewerTop{ border-bottom: 1px solid rgba(36,27,28,.10); background: rgba(0,0,0,.06); }
.viewerMeta{ font-size: 12px; color: var(--muted); }
.viewerActions{ display:flex; gap: 8px; align-items:center; }

.viewerStage{
  flex: 1;
  display:grid;
  place-items:center;
  background: rgba(0,0,0,.18);
}
html[data-theme="light"] .viewerStage{ background: rgba(255,255,255,.10); }

#viewerImg{
  max-width: 100%;
  max-height: 100%;
  transform: translateZ(0);
}
.viewerCaption{
  padding: 10px 12px 12px;
  font-size: 13px;
  color: rgba(255,255,255,.86);
  background: rgba(0,0,0,.10);
}
html[data-theme="light"] .viewerCaption{
  color: rgba(36,27,28,.85);
  background: rgba(0,0,0,.04);
}

/* Better mobile: tabs scroll, tighter paddings */
@media (max-width: 520px){
  .page{ padding: 14px 12px 64px; }
  .frame{ padding: 12px; border-radius: 30px; }
  .windowBody{ padding: 12px; }
  .brandSub{ max-width: 64vw; }
  .heroRow{ grid-template-columns: 1fr; }
  .tabs{ overflow-x:auto; -webkit-overflow-scrolling: touch; padding-bottom: 6px; }
  .tabs::-webkit-scrollbar{ display:none; }
  .tab{ white-space: nowrap; }
  .calendarWrap{ grid-template-columns: 1fr; }
  .monthLabel{ font-size: 34px; }
  .calGrid{ grid-auto-rows: 44px; gap: 7px; }
  .viewerCard{ width: calc(100vw - 18px); height: 86vh; }
}

/* Extra-small phones (iPhone 6/7/SE etc.) */
@media (max-width: 380px){
  .frame{ padding: 10px; border-radius: 26px; }
  .brandBadge{ width: 38px; height: 38px; }
  .brandTitle{ font-size: 16px; }
  .brandSub{ font-size: 12px; }
  .windowTop{ height: 48px; }
  .windowBody{ padding: 10px; }
  .monthLabel{ font-size: 30px; }
  .calGrid{ grid-auto-rows: 40px; gap: 6px; }
  .liveStage{ height: min(58vh, 520px); }
}
